<?php
    session_start();
?>
<html>
    <head>
        <title>환자 정보 페이지</title>
    </head>

    <body>
        <h1>환자 정보</h1>
        <?php
            $servername = "localhost";  // DB 서버 주소
            $username = "dbmaster";     // DB 사용자명
            $password = "1234";         // DB 비밀번호
            $dbname = "pentestDB";      // DB 이름

            $conn = new mysqli($servername, $username, $password, $dbname);
            if ($conn->connect_error) {
                die("DB 연결 실패: " . $conn->connect_error);
            }  
            $sql = "SELECT id, username, record FROM patient_records";
            $result = $conn->query($sql);   
            if ($result->num_rows > 0) {
                echo "<table border='1'><tr><th>ID</th><th>이름</th><th>진료 기록</th></tr>";
                while($row = $result->fetch_assoc()) {
                    echo "<tr><td>".htmlspecialchars($row["id"])."</td><td>".htmlspecialchars($row["username"])."</td><td>".htmlspecialchars($row["record"])."</td></tr>";
                }
                echo "</table>";
            } else {
                echo "등록된 환자 정보가 없습니다.";
            }
        ?>
    </body>
</html>