<html>
    <head>
        <title>회원가입</title>
        <link rel="stylesheet" type="text/css" href="../css/register.css"/>
        <script>
            function checkDuplicateId() {
                const userId = document.getElementById('user_id').value;
                if (!userId) {
                    alert('아이디를 입력해주세요.');
                    return;
                }

                const xhr = new XMLHttpRequest();
                xhr.open('POST', 'check_duplicate_id.php', true);
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        const response = JSON.parse(xhr.responseText);
                        if (response.exists) {
                            alert('이미 존재하는 아이디입니다.');
                        } else {
                            alert('사용 가능한 아이디입니다.');
                        }
                    }
                };
                xhr.send('user_id=' + encodeURIComponent(userId));
            }
        </script>
    </head>
    <body>
        <h1>회원가입</h1>
        <form action="register_submit.php" method="post">
            <label for="user_id">아이디:</label>
            <input type="text" id="user_id" name="user_id" required><br>
            <button type="button" onclick="checkDuplicateId()">아이디 중복 확인</button>

            <label for="pw">비밀번호:</label>
            <input type="password" id="pw" name="pw" required><br>

            <label for="name">이름:</label>
            <input type="text" id="name" name="name" required><br>

            <label for="sex">성별:</label>
            <select id="sex" name="sex">
                <option value="male">남성</option>
                <option value="female">여성</option>
            </select><br>

            <label for="birth_date">생년월일:</label>
            <input type="date" id="birth_date" name="birth_date" required><br>

            <label for="phone">전화번호:</label>
            <input type="tel" id="phone" name="phone" placeholder=" -(dash)  기호를 넣어 전화번호를 작성해주세요." required><br>

            <label for="address">주소:</label>
            <input type="text" id="address" name="address" required><br>

            <input type="submit" value="가입">
        </form>
    </body>
</html>