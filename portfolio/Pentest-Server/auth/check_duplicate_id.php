<?php

    // 사용자 입력
    $input_id = $_POST['user_id'] ?? '';
    
    //DB 연결
    $servername = "localhost";
    $username = "dbmaster";
    $password = "1234";
    $dbname = "pentestDB";

    $conn = new mysqli($servername, $username, $password, $dbname);
    if ($conn->connect_error) {
        die("DB 연결 실패: " . $conn->connect_error);
    }   

    $sql = "SELECT id FROM users WHERE id = '" . $input_id . "'";
    $result = $conn->query($sql);
    $response = array('exists' => false);

    if ($result && $result->num_rows > 0) {
        $response['exists'] = true;
    }
    
    if (!$result) {
    echo json_encode(['exists' => false, 'error' => $conn->error]);
    $conn->close();
    exit;
    }

    header('Content-Type: application/json; charset=utf-8');
    echo json_encode($response);
    $conn->close();
?>