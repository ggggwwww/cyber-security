<?php

    session_start();

    $servername = "localhost";
    $username = "dbmaster";     // DB 사용자명
    $password = "1234";         // DB 비밀번호
    $dbname = "pentestDB";      // DB 이름

    $conn = new mysqli($servername, $username, $password, $dbname);
    if ($conn->connect_error) {
        die("DB 연결 실패: " . $conn->connect_error);
    }

    $reservation_id = $_POST['reservation_id'];
    $sql = "DELETE FROM reservations WHERE id = " . intval($reservation_id);
    if ($conn->query($sql)) {
        echo "<script>alert('예약이 취소되었습니다.'); window.location.href='/patient/my_reservation.php';</script>";
    } else {
        echo "<script>alert('취소 실패: " . $conn->error . "');</script>";
    }
    $conn->close();
?>
