<?php
    session_start();
    
    $username = $_POST['username'];
    $board_id = $_POST['id'];
    if($_SERVER['REQUEST_METHOD'] == 'POST' && $_SESSION['username'] == $username){
        
        $servername = "localhost";
        $username = "dbmaster";
        $password = "1234";
        $dbname = "pentestDB";

        $conn = new mysqli($servername, $username, $password, $dbname);
        if ($conn->connect_error) {
            die("DB 연결 실패: " . $conn->connect_error);
        }

        $sql = "DELETE FROM boards WHERE id='" . $board_id . "'";
        if ($conn->query($sql) === TRUE) {
            echo "<script>alert('게시물이 성공적으로 삭제되었습니다.'); window.location.href = '/index.php';</script>";
        } else {
            echo "<script>alert('게시물 삭제 중 오류가 발생했습니다: " . $conn->error . "'); window.location.href = '/index.php';</script>";
        }

        $conn->close();
    }
?>