<?php
    session_start();
?>
<html>
<head>
    <title>SecuriCare Main</title>
    <link rel="stylesheet" type="text/css" href="css/index.css"/>
</head>
<body>
    <!-- 상단 hero 및 배경 -->
    <div class="backgroundSection">
        <h1 class="hero-title">SecuriCare</h1>
        <!-- 로그인/프로필 박스 -->
        <?php if(!isset($_SESSION['user_id'])): ?>
        <div id="loginDiv" class="loginDiv">
            <form method="post" action="auth/login.php">
                <div class="form-row">
                    <label for="login_id">Id</label>
                    <input type="text" id="login_id" name="id" placeholder="아이디를 입력하세요" />
                </div>
                <div class="form-row">
                    <label for="login_pw">Password</label>
                    <input type="password" id="login_pw" name="pw" placeholder="비밀번호를 입력하세요" />
                </div>
                <button type="submit">로그인</button>
                <button><a href="auth/register_view.php">회원가입</a></button>
            </form>
        </div>
        <?php else: ?>
        <div id="profileDiv">
            <span>ID: </span><?php echo htmlspecialchars($_SESSION['user_id']); ?><br/>
            <img src="profile/images/default.png" alt="Profile Image" width="100" height="100"/><br/>
            <button><a href="profile/profile.php">프로필 관리</a></button>
            <button><a href="auth/logout.php">로그아웃</a></button>
        </div>
        <?php endif; ?>
        <!-- 진료/관리 박스(로그인된 상태에 따라만 출력) -->
        <?php
            if(isset($_SESSION['role'])) {
                if($_SESSION['role']=='doctor'){
                    echo '<div id="doctorDiv"><ul>';
                    echo '<li><button><a href="doctor/patient_records.php">진료 관리</a></button></li>';
                    echo '<li><button><a href="doctor/patient_info.php">환자 정보</a></button></li>';
                    echo '</ul></div>';
                }
                else if($_SESSION['role']=='admin'){
                    echo '<div id="adminDiv"><ul>';
                    echo '<li><button><a href="admin/admin.php">관리자 페이지</a></button></li>';
                    echo '</ul></div>';
                }
                else if($_SESSION['role']=='patient'){
                    echo '<div id="patientDiv"><ul>';
                    echo '<li><button><a href="patient/my_reservation.php">나의 진료 예약</a></button></li>';
                    echo '<li><button><a href="patient/my_records.php">나의 진료 기록</a></button></li>';
                    echo '</ul></div>';
                }
            }
        ?>
    </div>
    <!-- 내용 section은 hero(배경) 아래에 위치 -->
    <section class="menuSection">
        <article>
            <div id="infoDiv">
                <?php
                    if(isset($_SESSION['user_id'])) {
                        echo '<h2>안녕하세요 '. htmlspecialchars($_SESSION['username']) .'님</h2>';
                    }
                ?> 
                <p>공백</p>
            </div>
            <div id="boards">
                <ul>
                    <li><a href="board/notice_view.php">공지 게시판</a></li>
                    <li><a href="board/feedback_view.php">건의사항 게시판</a></li>
                    <li><a href="board/errorReport_view.php">오류 보고 게시판</a></li>
                </ul>
            </div>
        </article>
    </section>
</body>
</html>
<?php
    if(isset($_SESSION['user_id'])){
        echo "<script>document.getElementById('loginDiv').style.display = 'none';</script>";
    }
?>
